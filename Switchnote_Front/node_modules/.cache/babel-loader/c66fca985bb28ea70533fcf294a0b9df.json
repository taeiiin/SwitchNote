{"ast":null,"code":"var _jsxFileName = \"/Users/taein/Desktop/\\u1112\\u1161\\u11AB\\u110B\\u1175\\u110B\\u1173\\u11B7/SwitchNote_1101/Switchnote_Front/src/components/TxtInput.js\";\n//Txt->PPT 중 텍스트 업로드 페이지\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport loadingIcon from './images/loading.gif';\nimport MyButton from './MyButton.js';\nimport { CallGPT } from '../api/gpt';\nimport TextInput from './TextInput.js';\nimport { CallKoBERT } from '../api/kobert';\nfunction TxtInput() {\n  // 사용자 입력값 저장 상태\n  const [userInput, setUserInput] = useState(\"\");\n\n  // ppt 생성 기능\n  const handleSubmit = async () => {\n    await handleCreatePPT(userInput);\n  };\n  const [data, setData] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n\n  // ppt 생성 함수\n  const handleCreatePPT = async input => {\n    try {\n      setIsLoading(true);\n      const message = await CallGPT({\n        prompt: `${input}`\n      });\n      console.log(message);\n      console.log(transformGPTOutput(message));\n\n      //kobertResult 변수에 kobert 수행 결과가 들어 있음\n      const kobertResult = await CallKoBERT({\n        text: `${input}`\n      });\n      console.log(kobertResult);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  //gpt 결과를 {page:,type:,title:,subtitle:,content:} 형식으로 변환하는 함수\n  const transformGPTOutput = gptOutput => {\n    // '---' 기호를 기준으로 페이지 분리\n    const pages = gptOutput.split('---');\n    const database = [];\n\n    // 페이지 타입과 해당하는 알파벳 문자 매핑\n    const pageTypeMapping = {\n      '[표지]': 'a',\n      '[목차]': 'b',\n      '[본문]': 'c',\n      '[마무리]': 'd'\n    };\n    for (const page of pages) {\n      const lines = page.split('\\n');\n      let title = \"\",\n        subtitle = \"\",\n        contentList = [],\n        pageNumber = 0,\n        pageType = \"\";\n      for (const line of lines) {\n        if (Object.keys(pageTypeMapping).some(pageTypeKey => line.includes(pageTypeKey))) {\n          const matchedPageTypeKey = Object.keys(pageTypeMapping).find(pageTypeKey => line.includes(pageTypeKey));\n          if (matchedPageTypeKey) {\n            pageType = pageTypeMapping[matchedPageTypeKey];\n          }\n        } else if (line.includes(\"페이지 번호:\")) {\n          pageNumber = parseInt(line.split(\"페이지 번호:\")[1].trim());\n        } else if (line.includes(\"제목:\")) {\n          title += line.split(\"제목:\")[1].trim();\n        } else if (line.includes(\"소제목:\")) {\n          subtitle += line.split(\"소제목:\")[1].trim();\n        } else if (line.includes(\"내용:\") || line.includes(\"마무리 문장:\")) {\n          contentList.push(line.trim());\n        } else {\n          if (line.trim().length > 0) {\n            contentList.push(line.trim());\n          }\n        }\n      }\n      const dataDict = {\n        page: pageNumber,\n        type: pageType,\n        title: title,\n        subtitle: subtitle,\n        content: contentList\n      };\n      database.push(dataDict);\n    }\n    return database;\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"TxtToPPT\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Text to PPT\", /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, \"PPT\\uB97C \\uB9CC\\uB4DC\\uB294 \\uAC00\\uC7A5 \\uBE60\\uB978 \\uBC29\\uBC95\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TextInput, {\n    isLoading: isLoading,\n    onSubmit: setUserInput,\n    value: userInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      gap: '10px',\n      marginTop: '50px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, isLoading ? /*#__PURE__*/React.createElement(\"img\", {\n    src: loadingIcon,\n    alt: \"Loading...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(MyButton, {\n    text: 'PPT 생성',\n    onClick: () => handleSubmit(userInput),\n    type: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 19\n    }\n  }))));\n}\nexport default TxtInput;","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","loadingIcon","MyButton","CallGPT","TextInput","CallKoBERT","TxtInput","userInput","setUserInput","handleSubmit","handleCreatePPT","data","setData","isLoading","setIsLoading","input","message","prompt","console","log","transformGPTOutput","kobertResult","text","error","gptOutput","pages","split","database","pageTypeMapping","page","lines","title","subtitle","contentList","pageNumber","pageType","line","Object","keys","some","pageTypeKey","includes","matchedPageTypeKey","find","parseInt","trim","push","length","dataDict","type","content","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","id","onSubmit","value","style","display","flexDirection","alignItems","gap","marginTop","src","alt","onClick"],"sources":["/Users/taein/Desktop/한이음/SwitchNote_1101/Switchnote_Front/src/components/TxtInput.js"],"sourcesContent":["//Txt->PPT 중 텍스트 업로드 페이지\nimport React, { useEffect, useRef, useState } from 'react';\nimport {useParams} from 'react-router-dom'\nimport loadingIcon from './images/loading.gif';\nimport MyButton from './MyButton.js';\nimport { CallGPT } from '../api/gpt';\nimport TextInput from './TextInput.js';\nimport { CallKoBERT } from '../api/kobert';\n\nfunction TxtInput() {\n    // 사용자 입력값 저장 상태\n    const [userInput, setUserInput] = useState(\"\");\n  \n    // ppt 생성 기능\n    const handleSubmit = async () => {\n      await handleCreatePPT(userInput);\n    }\n  \n    const [data, setData] = useState(\"\");\n    const [isLoading, setIsLoading] = useState(false);\n  \n    // ppt 생성 함수\n    const handleCreatePPT = async(input) => {\n      try{\n        setIsLoading(true);\n        const message = await CallGPT({\n          prompt: `${input}`});\n        console.log(message);\n        console.log(transformGPTOutput(message));\n  \n        //kobertResult 변수에 kobert 수행 결과가 들어 있음\n        const kobertResult = await CallKoBERT({text: `${input}`})\n        console.log(kobertResult);\n      } catch(error) {\n        console.error(error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n  \n    //gpt 결과를 {page:,type:,title:,subtitle:,content:} 형식으로 변환하는 함수\n    const transformGPTOutput = (gptOutput) => {\n      // '---' 기호를 기준으로 페이지 분리\n      const pages = gptOutput.split('---');\n    \n      const database = [];\n    \n      // 페이지 타입과 해당하는 알파벳 문자 매핑\n      const pageTypeMapping = {\n          '[표지]': 'a',\n          '[목차]': 'b',\n          '[본문]': 'c',\n          '[마무리]': 'd'\n      };\n    \n      for (const page of pages) {\n          const lines = page.split('\\n');\n    \n          let title = \"\", subtitle = \"\", contentList = [], pageNumber = 0, pageType = \"\";\n    \n          for (const line of lines) {\n              if (Object.keys(pageTypeMapping).some(pageTypeKey => line.includes(pageTypeKey))) {\n                  const matchedPageTypeKey = Object.keys(pageTypeMapping).find(pageTypeKey => line.includes(pageTypeKey));\n    \n                  if (matchedPageTypeKey) {\n                      pageType = pageTypeMapping[matchedPageTypeKey];\n                  }\n              } else if (line.includes(\"페이지 번호:\")) {\n                  pageNumber = parseInt(line.split(\"페이지 번호:\")[1].trim());\n              } else if (line.includes(\"제목:\")) {\n                  title += line.split(\"제목:\")[1].trim();\n              } else if (line.includes(\"소제목:\")) {\n                  subtitle += line.split(\"소제목:\")[1].trim();\n              } else if (line.includes(\"내용:\") || line.includes(\"마무리 문장:\")) {\n                  contentList.push(line.trim());\n              } else {\n                  if (line.trim().length > 0) {\n                      contentList.push(line.trim());\n                  }\n              }\n          }\n    \n          const dataDict = {\n              page: pageNumber, \n              type: pageType,\n              title: title, \n              subtitle: subtitle, \n              content: contentList\n          };\n    \n          database.push(dataDict);\n      }\n    \n      return database;\n    };\n\n  return(\n      <div>\n          <div id='TxtToPPT'>\n              Text to PPT\n              <div>\n                  PPT를 만드는 가장 빠른 방법\n              </div>\n\n              <div>\n                <TextInput \n                  isLoading={isLoading} \n                  onSubmit={setUserInput} \n                  value={userInput}\n                />\n              </div>\n              \n              <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap:'10px', marginTop:'50px'}}>\n                {isLoading ? (\n                  <img src={loadingIcon} alt=\"Loading...\" />\n                ) : (\n                  <MyButton \n                    text={'PPT 생성'}\n                    onClick={() => handleSubmit(userInput)}\n                    type={\"blue\"}\n                  />\n                )}\n              </div>\n          </div>\n      </div>\n  )\n}\n\nexport default TxtInput;"],"mappings":"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"},"metadata":{},"sourceType":"module"}